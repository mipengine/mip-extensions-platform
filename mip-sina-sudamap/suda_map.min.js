define(function(){function e(e,t){var n=0;return n=e.indexOf("#"),n>0?(t&&(S=e.substring(n)),e.substring(0,n)):(t&&(S=""),e)}function t(e){for(var t=0,n=0,i=e;;){if(t=i.indexOf("<"),n=i.indexOf(">",t),!(t>=0&&n>=0&&n>t))break;i=i.substring(0,t)+i.substring(n+1,i.length)}return i}function n(){if(""!=x)return x;var e="",t=E.toLowerCase(),n=t.indexOf("sina.");if(n>0)e="sina.cn";else{var i=t.indexOf(".");if(!(i>0))return"";i+=1,n=t.indexOf("/",i),0>n&&(n=t.length),e=t.substring(i,n)}return x=e,e}function o(e){var t=document.cookie.indexOf(e+"=");if(-1==t)return"";t=document.cookie.indexOf("=",t)+1;var n=document.cookie.indexOf(";",t);return 0>=n&&(n=document.cookie.length),ckValue=document.cookie.substring(t,n),ckValue}function a(e,t,i){if(null!=t)if(_suds_cmp_domainRoot=n(),"undefined"==i||null==i)document.cookie=e+"="+t+"; domain="+_suds_cmp_domainRoot+"; path=/";else{var o=new Date,a=o.getTime();a+=864e5*i,o.setTime(a),a=o.getTime(),document.cookie=e+"="+t+"; domain="+_suds_cmp_domainRoot+"; expires="+o.toUTCString()+"; path=/"}}function r(){if(ckTmp=o(T),""==ckTmp){var e=new Date;ckTmp=1e13*Math.random()+"."+e.getTime(),a(T,ckTmp)}return ckTmp}function c(){var t=Math.floor(100*Math.random());if(!(b>t))return 0;window.suda=!0,""==L&&(L=r(T)),""==I&&(I=o(M)),""==y&&(y=o(C));try{document.addEventListener?(document.addEventListener("click",s,!1),window.addEventListener("load",f,!1)):(document.attachEvent("onclick",s),window.attachEvent("onload",f))}catch(n){}A=escape(e(window.document.referrer)),E=escape(e(window.document.URL))}function d(e,t,n,i){var o="";"undefined"!=typeof sudaMapConfig.uId&&(o=sudaMapConfig.uId),"undefined"!=typeof sudaMapConfig.addRequestTime&&(_=sudaMapConfig.addRequestTime),strSudsClickMapQuest=E+"|*|"+e+"|*|"+L+"|*|"+I+"|*|"+A+"|*|"+k+"|*|"+o+"|*|"+y;var a=N+"?"+strSudsClickMapQuest,r=new Image;window.SUDAPIC=r,r.src=a,window.SIMA(i);var c=t.toLocaleLowerCase();t&&-1==c.indexOf("javascript:")&&setTimeout(function(){if(_){var e=(new Date).getTime(),i="user"+e+Math.random().toString().slice(2),o=t.indexOf("?")>-1?"&":"?";t=t+o+"clicktime="+e+"&userid="+i}if(console.log(t,S),"_blank"==n){var a=window.navigator.userAgent.toLowerCase();/ucbrowser/i.test(a)?window.location.href="ext:wo:"+t+S:/qqbrowser/i.test(a)?window.location.href=t+S:window.open(t+S)}else window.location.href=t+S},200)}function u(e,t,n){for(var i=0;n>i;i++){if(!e.parentNode||e==document)return null;if(e=e.parentNode,t==e.tagName)break}return i>=n?null:e}function s(n){var n=n||event,o=n.srcElement||n.target;if(null==o&&o==document)return!1;var a="",r="",c="",s="",f="";if("A"==o.tagName)a="txt",r=t(o.innerHTML),c=e(o.href,!0),f=o.getAttribute("target"),s=o;else if("IMG"==o.tagName){a="img",r=o.alt;var w=u(o,"A",8);w&&(c=e(w.href,!0),f=w.getAttribute("target"),s=w)}else{a="txt",r=t(o.innerHTML);var w=u(o,"A",8);w&&(c=e(w.href,!0),f=w.getAttribute("target"),s=w)}var m="",l=o.tagName,p="",g=!1;try{for(i=0;i<10&&o!=document;i++){var v=o.getAttribute("data-sudaclick");if(v){var h=o.getAttribute("data-sudatagname");if(h){g=!0;var k=h.split(",");k.forEach(function(e){console.log(e.toUpperCase(),l),e.toUpperCase()==l&&(g=!1)})}m=v;for(var b=o.getElementsByTagName("A"),_=0;_<b.length;_++)if(b[_].innerHTML==s.innerHTML){p=_;break}break}if(!o.parentNode)break;o=o.parentNode}}catch(T){}if(!g&&m){c&&n.preventDefault(),r&&r.length>30&&(r=r.substr(0,30));var x=new Date,L=x.getTime(),M={data:{index:p,aid:m,url:c},action:"_click"},C="t="+a+",s="+r+",h="+escape(c)+",ct="+L+",aid="+m+"-"+p+"|";d(C,c,f,M)}}function f(){w(window)}function w(e){for(var t=e.frames,n=0;n<t.length;n++)try{""!=t[n].location&&null!=t[n].document&&(document.addEventListener?(t[n].document.removeEventListener("click",s,!1),t[n].document.addEventListener("click",s,!1)):(t[n].document.detachEvent("onclick",s),t[n].document.attachEvent("onclick",s)),w(t[n]))}catch(i){}}function m(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":"android"}function l(e){window.checkLogin()?window.getUserInfo(function(t){e&&e(t.uid||"")}):e&&e("")}function p(){var e=(new Date).getTime(),t=Math.random();return""+e+"_"+t}function g(e){var t=new Image;t.src=e}function v(){return""}function h(){var e,t;return"function"==typeof window.getCookie&&(e=o(M)||""),"object"==typeof window.userInfo&&(t=userInfo.uid||""),(t||"")+";"+(e||"")}var k=0,b=100,_=!1,T="Apache",x="",L="",M="ustat",C="statuid",I="",y="",A=document.referrer,E=document.URL,O="https:"==window.location.protocol?"https://":"http://",D="https:"==window.location.protocol?"sbeacon.sina.com.cn":"beacon.sina.com.cn",N=O+D+"/b.gif",S="";""==A&&(A="newpage"),window.suda_init=window.suds_init=function(e,t){var n=arguments.length;n>0&&(k=e,b=t,"function"==typeof window.getUserInfo?window.getUserInfo(function(e){e&&e.uid&&(window.sudaMapConfig.uId=e.uid),c()},!0):c())},window.suda_count=window.suds_count=function(e){if(!e.name)return!1;e.type||(e.type="btn"),e.title||(e.title=""),e.index||(e.index=0),e.href||(e.href="");var t="",n="",i=(new Date).getTime(),o="t="+e.type+",s="+e.title+",h="+escape(e.href)+",ct="+i+",aid="+e.name+"-"+e.index+"|";n=void 0==e.target?"":e.target,d(o,t,n)},window.SIMA=function(t){if(t&&t.action&&t.data){var n="https:"==window.location.protocol?"https://":"http://",o="https:"==window.location.protocol?"sbeacon.sina.com.cn":"beacon.sina.com.cn",a=n+o+"/mrt.gif?",r=window.location.href.match(/\w+\.sina\.cn/)||"";r=r?r[0].split(".")[0]:"";var c=t.action;switch(c){case"_click":var c="CLICK";break;case"_exposure":case"_loadmore":var c="SLIDE";break;default:var c=""}for(i in t.data)"string"==typeof t.data[i]&&(t.data[i]=t.data[i].replace(/(\n|\t)/gi,""));var d=m(),u=p(),s=v();t.pk||(t.data.cre||t.data.mod?t.pk="187522":t.pk="187523"),l(function(n){t.data.uid=h();var i={_pk:t.pk,_src:"web",_rk:u,_v:"1.0",_cp:{os:d,uid:n,accesstype:s},_ep:[{attribute:t.data,channel:r?"wap_"+r:"",ek:t.action,ref:e(window.document.referrer)||"",et:"custom",src:e(window.location.href)||"",method:c,timestamp:(new Date).getTime()}]};g(a+JSON.stringify(i))})}}});
//# sourceMappingURL=suda_map.js.map